{"version":3,"sources":["app/filters/ErrorHandlerFilter.ts"],"names":[],"mappings":";AAAA,2BAA2B;AAC3B,gCAAgC;;;;;;;;;;;AAIhC,+DAA0D;AAC1D,yEAA4D;AAE5D;;GAEG;AAEH,IAAa,kBAAkB,GAA/B;IAEC;IAGA,CAAC;IAEM,MAAM,CAAC,GAAoB,EAAE,GAAqB,EAAE,IAAc;QACxE,IAAI,CAAC;YACJ,IAAI,EAAE,CAAC;QACR,CAAC;QAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACd,EAAE,CAAC,CAAC,GAAG,YAAY,2CAAe,CAAC,CAAC,CAAC;gBACpC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAC3B,CAAC;YACD,IAAI,CAAC,CAAC;gBACL,0BAA0B;gBAC1B,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;YAC/C,CAAC;QACF,CAAC;IACF,CAAC;CACD,CAAA;AApBY,kBAAkB;IAD9B,iCAAU,EAAE;;GACA,kBAAkB,CAoB9B;AApBY,gDAAkB","file":"ErrorHandlerFilter.js","sourcesContent":["// Handle validation errors\r\n// Handle server internal errors\r\n\r\nimport * as express from 'express';\r\n\r\nimport { injectable, inject } from 'back-lib-common-util';\r\nimport { ValidationError } from 'back-lib-common-contracts';\r\n\r\n/**\r\n * Provides method to look up tenant ID from tenant slug.\r\n */\r\n@injectable()\r\nexport class ErrorHandlerFilter {\r\n\r\n\tconstructor(\r\n\t\t// @inject() private logProvider: ILogProvider\r\n\t) {\r\n\t}\r\n\r\n\tpublic handle(req: express.Request, res: express.Response, next: Function): void {\r\n\t\ttry {\r\n\t\t\tnext();\r\n\t\t} catch (err) {\r\n\t\t\tif (err instanceof ValidationError) {\r\n\t\t\t\tres.status(412).send(err);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// logProvider.error(err);\r\n\t\t\t\tres.status(500).send('server.error.internal');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}"]}